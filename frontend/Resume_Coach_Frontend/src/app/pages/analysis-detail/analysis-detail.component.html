<div class="detail-container">
  <div class="analysis-panel">
    <h2 class="section-title">ğŸ“ˆ Detailed Analysis</h2>
    <mat-card class="info-card">
      <mat-card-header>
        <mat-card-title
          >ğŸ“„ Resume: {{ analysisData.resumeName || "Unknown" }}</mat-card-title
        >
      </mat-card-header>
      <mat-divider></mat-divider>
      <mat-card-content>
        <p><strong>ğŸ“ JD:</strong> {{ jdSource }}</p>
      </mat-card-content>
    </mat-card>

    <mat-card class="score-card">
      <div class="score-left">
        <p class="timestamp">
          ğŸ•’ {{ analysisData.timestamp | date : "short" }}
        </p>
      </div>
      <div class="score-center">
        <h3>Match Score</h3>
        <div
          class="score-circle"
          [ngClass]="getScoreClass(analysisData.feedback.match_percentage)"
        >
          {{ analysisData.feedback.match_percentage }}%
        </div>
      </div>
      <div class="score-right">
        <p class="model-used">ğŸ¤– {{ analysisData.model_used || "Unknown" }}</p>
      </div>
    </mat-card>

    <mat-card class="info-card">
      <mat-card-header>
        <mat-card-title>âœ… Matching Skills</mat-card-title>
      </mat-card-header>
      <mat-divider></mat-divider>
      <mat-card-content>
        <mat-chip-listbox aria-label="Matching Skills">
          <mat-chip
            *ngFor="let skill of analysisData.feedback.matching_skills"
            color="primary"
            highlighted
          >
            {{ skill }}
          </mat-chip>
        </mat-chip-listbox>
      </mat-card-content>
    </mat-card>

    <mat-card class="info-card">
      <mat-card-header>
        <mat-card-title>âŒ Missing Skills</mat-card-title>
      </mat-card-header>
      <mat-divider></mat-divider>
      <mat-card-content>
        <mat-chip-listbox aria-label="Missing Skills">
          <mat-chip
            *ngFor="let skill of analysisData.feedback.missing_skills"
            color="warn"
            highlighted
          >
            {{ skill }}
          </mat-chip>
        </mat-chip-listbox>
      </mat-card-content>
    </mat-card>

    <mat-card class="info-card">
      <mat-card-header>
        <mat-card-title>ğŸ“Œ Extra Skills</mat-card-title>
      </mat-card-header>
      <mat-divider></mat-divider>
      <mat-card-content>
        <mat-chip-listbox aria-label="Extra Skills">
          <mat-chip
            *ngFor="let skill of analysisData.feedback.extra_skills"
            color="accent"
            highlighted
          >
            {{ skill }}
          </mat-chip>
        </mat-chip-listbox>
      </mat-card-content>
    </mat-card>

    <mat-card class="info-card">
      <mat-card-header>
        <mat-card-title>ğŸ’¡ Recommendations</mat-card-title>
      </mat-card-header>
      <mat-divider></mat-divider>
      <br />
      <mat-card-content>
        <ul class="recommendation-list">
          <li *ngFor="let tip of analysisData.feedback.recommendations">
            {{ tip }}
          </li>
        </ul>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="chatbot-panel">
    <mat-card
      class="chat-placeholder"
      matTooltip="Coming Soon!"
      matTooltipPosition="below"
    >
      <mat-card-header>
        <mat-card-title>ğŸ¤– Career Coach Chat</mat-card-title>
      </mat-card-header>
      <mat-divider></mat-divider>
      <mat-card-content>
        <p>Coming soon! You'll be able to chat with your AI Coach here.</p>
        <span class="coming-soon-icon">â³</span>
      </mat-card-content>
    </mat-card>
  </div>
</div>
